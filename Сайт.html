<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>–î–º–∏—Ç—Ä–∏–π –ö–æ—Å—Ç—é–∫ ‚Äî –ò–ª–ª—é–∑–∏–æ–Ω–∏—Å—Ç | Premium Magic</title>

<meta name="description" content="–ü—Ä–µ–º–∏–∞–ª—å–Ω–æ–µ —à–æ—É –∏–ª–ª—é–∑–∏–æ–Ω–∏—Å—Ç–∞ –î–º–∏—Ç—Ä–∏—è –ö–æ—Å—Ç—é–∫–∞.">
<meta property="og:title" content="–î–º–∏—Ç—Ä–∏–π –ö–æ—Å—Ç—é–∫ ‚Äî –ò–ª–ª—é–∑–∏–æ–Ω–∏—Å—Ç">
<meta property="og:image" content="images/portrait.jpg">
<meta name="theme-color" content="#050505">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Manrope:wght@300;400;600;800&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<style>
:root {
  --bg: #050505;
  --bg-panel: rgba(20, 20, 22, 0.85);
  --text: #F2F2F2;
  --gold-primary: #D4AF37;
  --gold-light: #F8E79B;
  --gold-dark: #8A6E2F;
  --gradient-gold: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-light) 50%, var(--gold-dark) 100%);
  --container: min(1100px, 92vw);
  --ff-head: 'Cinzel', serif;
  --ff-body: 'Manrope', sans-serif;
}

/* === BASE === */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html { -webkit-font-smoothing: antialiased; cursor: none; }
@media (max-width: 900px) { html { cursor: auto; } }

body {
  font-family: var(--ff-body); background: var(--bg); color: var(--text);
  line-height: 1.6; overflow-x: hidden; position: relative;
  opacity: 0; visibility: hidden;
}

/* 3D CANVAS */
#webgl-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }

/* MAGIC CURSOR */
.magic-cursor {
  position: fixed; top: 0; left: 0; width: 20px; height: 20px;
  border: 1px solid var(--gold-primary); border-radius: 50%;
  pointer-events: none; z-index: 9999; transform: translate(-50%, -50%);
  transition: width 0.3s, height 0.3s, background 0.3s, opacity 0.3s;
  mix-blend-mode: exclusion;
}
.magic-cursor.hovered { width: 60px; height: 60px; background: rgba(212, 175, 55, 0.8); border-color: transparent; mix-blend-mode: normal; }
@media (max-width: 900px) { .magic-cursor { display: none; } }

/* Preloader */
.preloader { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; align-items: center; justify-content: center; }
.preloader-text { font-family: var(--ff-head); font-size: 1.5rem; color: var(--gold-primary); letter-spacing: 0.2em; opacity: 0; }

/* === UI UTILS === */
.container { width: var(--container); margin: 0 auto; position: relative; z-index: 2; }
.section-py { padding-block: clamp(60px, 8vw, 120px); }
.text-gold { background: linear-gradient(to right, #D4AF37, #FFF5C3, #D4AF37); -webkit-background-clip: text; color: transparent; background-clip: text; font-weight: 700; }
.text-center { text-align: center; }

/* SVG Icons */
.icon-svg { width: 24px; height: 24px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
.icon-large { width: 48px; height: 48px; stroke-width: 1.5; }

/* Buttons */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 10px;
  padding: 16px 32px; border-radius: 60px; font-weight: 700; font-size: 1rem;
  text-transform: uppercase; letter-spacing: 0.05em; transition: 0.3s;
  position: relative; overflow: hidden; z-index: 1; border:none; outline:none; cursor: pointer;
}
.btn-primary { background: var(--gradient-gold); color: #000; box-shadow: 0 4px 20px rgba(212, 175, 55, 0.2); }
.btn-primary:hover { box-shadow: 0 10px 40px rgba(212, 175, 55, 0.5); transform: translateY(-2px); }
.btn-glass { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; backdrop-filter: blur(4px); }
.btn-glass:hover { border-color: var(--gold-primary); background: rgba(255,255,255,0.1); }
.btn:disabled { opacity: 0.6; cursor: not-allowed; filter: grayscale(1); }

/* Inputs */
.input-field {
  width: 100%; background: rgba(20,20,20,0.8); border: 1px solid #333;
  padding: 16px; border-radius: 12px; color: #fff; font-size: 1rem; margin-bottom: 16px; transition: 0.3s;
  backdrop-filter: blur(5px); outline: none;
}
.input-field:focus { border-color: var(--gold-primary); box-shadow: 0 0 15px rgba(212,175,55,0.1); }
label { display: block; margin-bottom: 8px; font-size: 0.85rem; color: #888; text-transform: uppercase; letter-spacing: 0.05em; }

/* === HEADER === */
.header { position: fixed; top: 0; inset-inline: 0; z-index: 100; padding: 20px 0; transition: 0.4s; }
.header.scrolled { background: rgba(5,5,5,0.95); backdrop-filter: blur(12px); padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
.nav-flex { display: flex; justify-content: space-between; align-items: center; }
.logo { font-family: var(--ff-head); font-size: 1.5rem; font-weight: 900; color: #fff; }
.logo span { color: var(--gold-primary); }
.burger { width: 40px; height: 40px; background: none; display: flex; flex-direction: column; justify-content: center; gap: 6px; border:none; cursor:pointer; }
.burger span { width: 28px; height: 2px; background: #fff; align-self: flex-end; transition: 0.3s; }
.burger.active span:nth-child(2) { opacity: 0; }
.burger.active span:nth-child(1) { transform: rotate(45deg) translate(5px, 6px); }
.burger.active span:nth-child(3) { transform: rotate(-45deg) translate(5px, -6px); }

.mobile-menu {
  position: fixed; inset: 0; background: #000; z-index: 99;
  display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 2rem;
  transform: translateY(-100%); transition: 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}
.mobile-menu.open { transform: translateY(0); }
.menu-link { font-family: var(--ff-head); font-size: 2rem; color: #fff; opacity: 0.7; text-decoration: none; }

/* === HERO === */
.hero { height: 100dvh; display: flex; align-items: center; position: relative; overflow: hidden; }
.hero-img {
  position: absolute; right: 0; bottom: 0; height: 95%; width: 55%;
  background: url('images/portrait.jpg') no-repeat bottom center/contain;
  mask-image: linear-gradient(to right, transparent 5%, black 40%);
  -webkit-mask-image: linear-gradient(to right, transparent 5%, black 40%);
  opacity: 0.9; pointer-events: none;
}
@media (max-width: 768px) {
  .hero-img { width: 100%; height: 60%; bottom: 0; right: 0; opacity: 0.4; mask-image: linear-gradient(to top, black, transparent); -webkit-mask-image: linear-gradient(to top, black, transparent); }
  .hero-content { padding-top: 0; text-align: center; }
  .hero-btns { justify-content: center; }
  .hero-stats { justify-content: center; flex-wrap: wrap; gap: 20px; }
}

.hero-content { max-width: 700px; position: relative; z-index: 2; }
.hero-title { font-family: var(--ff-head); font-size: clamp(40px, 9vw, 96px); line-height: 1.05; margin-bottom: 24px; }
.hero-desc { font-size: 1.1rem; color: #aaa; margin-bottom: 40px; max-width: 480px; opacity: 0; transform: translateY(20px); }
.hero-btns { opacity: 0; transform: translateY(20px); display:flex; gap:20px; flex-wrap:wrap; }
.hero-stats { margin-top: 50px; display: flex; gap: 40px; opacity: 0; }
.stat h4 { font-size: 2rem; font-family: var(--ff-head); margin: 0; color: #fff; }
.stat p { color: var(--text-muted); font-size: 0.9rem; }

/* === PARTNERS MARQUEE === */
.partners-section { padding: 40px 0; border-bottom: 1px solid #222; overflow: hidden; background: rgba(8,8,8,0.5); backdrop-filter: blur(5px); }
.partners-track { display: flex; gap: 60px; animation: scrollLogos 35s linear infinite; width: max-content; }
.partner-logo { height: 35px; opacity: 0.4; filter: grayscale(100%); transition: 0.3s; }
.partner-logo:hover { opacity: 1; filter: grayscale(0); }
@keyframes scrollLogos { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

/* === CARDS === */
.grid-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; }
.card {
  padding: 30px; background: var(--bg-panel); border: 1px solid rgba(255,255,255,0.08); border-radius: 20px;
  transition: 0.3s; opacity: 0; transform: translateY(50px); backdrop-filter: blur(10px);
  display: flex; flex-direction: column;
}
.card:hover { border-color: var(--gold-primary); background: rgba(255,255,255,0.08); }
.card-icon-wrap { margin-bottom: 20px; color: var(--gold-primary); }
.card h3 { font-family: var(--ff-head); font-size: 1.5rem; margin-bottom: 10px; color: #fff; }
.card-price { display: block; font-size: 1.1rem; color: var(--gold-primary); font-weight: 700; margin-bottom: 20px; }
.card ul li { padding-left: 20px; margin-bottom: 8px; color: #aaa; list-style: none; position: relative; }
.card ul li::before { content: ''; position: absolute; left: 0; top: 6px; width: 8px; height: 8px; background: var(--gold-primary); border-radius: 50%; box-shadow: 0 0 5px var(--gold-primary); }

/* === WIZARD CALCULATOR === */
.wizard-box {
  background: var(--bg-panel); border-radius: 24px; border: 1px solid #222; overflow: hidden;
  box-shadow: 0 40px 100px -20px rgba(0,0,0,0.8); min-height: 550px; display: flex; flex-direction: column;
  backdrop-filter: blur(10px);
}
.wizard-progress { height: 4px; background: #222; width: 100%; }
.progress-bar { height: 100%; background: var(--gradient-gold); width: 33%; transition: 0.5s cubic-bezier(0.25, 1, 0.5, 1); }
.wizard-step { padding: 30px; display: none; flex: 1; flex-direction: column; animation: slideIn 0.5s ease; overflow-y: auto; }
/* Custom Scrollbar for Step 2 */
.wizard-step::-webkit-scrollbar { width: 6px; }
.wizard-step::-webkit-scrollbar-track { background: #111; }
.wizard-step::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
.wizard-step.active { display: flex; }
@keyframes slideIn { from{opacity:0; transform:translateX(20px)} to{opacity:1; transform:translateX(0)} }
.step-title { font-family: var(--ff-head); font-size: 1.6rem; margin-bottom: 30px; color: #fff; text-align: center; }
.wiz-controls { margin-top: auto; display: flex; gap: 15px; padding-top: 20px; border-top: 1px solid #222; }
.receipt { background: #000; padding: 20px; border-radius: 16px; border: 1px solid #333; margin-bottom: 20px; }
.receipt-row { display: flex; justify-content: space-between; margin-bottom: 12px; border-bottom: 1px dashed #333; padding-bottom: 5px; color: #bbb; font-size: 0.9rem; }
.receipt-total { font-size: 2rem; color: var(--gold-primary); font-family: var(--ff-head); text-align: right; display: block; margin-top: 15px; }

/* Multi-Select Service Buttons (FIXED LAYOUT) */
#svcOptions { display: flex; flex-direction: column; gap: 25px; }
.svc-category-group { display: flex; flex-direction: column; gap: 10px; }
.svc-group-title { color: var(--gold-primary); font-family: var(--ff-head); text-transform: uppercase; font-size: 0.9rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; letter-spacing: 0.05em; width:100%; }
.svc-grid { display: grid; gap: 10px; grid-template-columns: 1fr; }
@media (min-width: 500px) { .svc-grid { grid-template-columns: 1fr 1fr; } }
.svc-btn {
  background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 15px; border-radius: 10px;
  cursor: pointer; transition: 0.2s; text-align: left; user-select: none; position: relative; overflow: hidden;
  display: flex; flex-direction: column; justify-content: center;
}
.svc-btn:hover { background: rgba(255,255,255,0.1); border-color: #555; }
.svc-btn.selected { border-color: var(--gold-primary); background: rgba(212, 175, 55, 0.15); box-shadow: 0 0 15px rgba(212,175,55,0.1); }
.svc-btn.selected::after { content: '‚úì'; position: absolute; top: 15px; right: 15px; color: var(--gold-primary); font-weight: bold; font-size: 1.2rem; }
.svc-name { display: block; font-weight: 700; color: #fff; margin-bottom: 4px; font-size: 0.9rem; padding-right: 20px; line-height: 1.2; }
.svc-cost { display: block; font-size: 0.85rem; color: var(--gold-primary); opacity: 0.9; }

/* BONUSES STYLES */
.bonus-container { margin-top: 20px; border-top: 1px solid #333; padding-top: 10px; }
.bonus-item {
  display: flex; align-items: center; gap: 15px;
  background: rgba(20, 20, 20, 0.8); padding: 15px; border-radius: 10px; margin-bottom: 10px;
  border: 1px solid; animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  position: relative; overflow: hidden;
}
@keyframes popIn { from{transform:scale(0.9);opacity:0} to{transform:scale(1);opacity:1} }

/* Gift Badge - Making it obvious */
.bonus-item .gift-badge { 
  margin-left: auto; /* Push to right */
  background: #28a745; color: #fff; 
  font-size: 0.7rem; padding: 4px 8px; border-radius: 4px; font-weight: 800;
  text-transform: uppercase; letter-spacing: 0.05em;
  animation: pulseGreen 2s infinite; text-align: center;
}
@keyframes pulseGreen { 0% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(40, 167, 69, 0); } 100% { box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); } }

.bonus-tier-1 { border-color: #4CAF50; background: linear-gradient(to right, rgba(76, 175, 80, 0.15), transparent); }
.bonus-tier-1 .icon-svg { stroke: #4CAF50; }
.bonus-tier-2 { border-color: var(--gold-primary); background: linear-gradient(to right, rgba(212, 175, 55, 0.15), transparent); }
.bonus-tier-2 .icon-svg { stroke: var(--gold-primary); animation: pulseIcon 2s infinite; }
.bonus-tier-3 { border-color: #ff4d4d; background: linear-gradient(to right, rgba(255, 77, 77, 0.15), transparent); box-shadow: 0 0 20px rgba(255, 77, 77, 0.1); }
.bonus-tier-3 .icon-svg { stroke: #ff4d4d; }
@keyframes pulseIcon { 0%, 100% { transform: scale(1); filter: drop-shadow(0 0 0 rgba(212,175,55,0)); } 50% { transform: scale(1.1); filter: drop-shadow(0 0 5px rgba(212,175,55,0.5)); } }
.bonus-text { font-size: 0.85rem; color: #fff; line-height: 1.3; }
.bonus-text strong { display: block; text-transform: uppercase; font-size: 0.8rem; font-weight: 800; margin-bottom: 2px; color: var(--gold-primary); }
.bonus-note { font-size: 0.7rem; color: #aaa; display: block; margin-top: 2px; font-style: italic; }

/* === GAME === */
.game-section { text-align: center; border-block: 1px solid #222; background: rgba(0,0,0,0.6); backdrop-filter:blur(5px); }
.deck { display: flex; justify-content: center; gap: 15px; margin: 40px 0; perspective: 1000px; }
.card-play { width: 100px; height: 150px; position: relative; transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); cursor: pointer; }
.card-play.flipped { transform: rotateY(180deg); }
.face { position: absolute; inset: 0; backface-visibility: hidden; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold; background: #fff; }
.back { background: linear-gradient(135deg, #111, #333); border: 2px solid var(--gold-primary); transform: rotateY(0deg); z-index: 2; }
.front { transform: rotateY(180deg); color: #000; }

/* === REVIEWS & FAQ === */
.reviews-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
.review-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); padding: 25px; border-radius: 16px; backdrop-filter: blur(5px); }
.stars { display:flex; gap:2px; margin-bottom: 10px; }
.stars svg { width:16px; height:16px; fill:var(--gold-primary); stroke:none; }
.review-text { font-style: italic; color: #ccc; margin-bottom: 15px; line-height: 1.5; font-size: 0.95rem; }
.review-author { font-weight: 700; color: #fff; font-family: var(--ff-head); font-size: 0.9rem; }

.faq-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100%, 1fr)); gap: 15px; }
@media (min-width: 768px) { .faq-grid { grid-template-columns: 1fr 1fr; } }
details { background: var(--bg-panel); border: 1px solid #222; border-radius: 12px; overflow: hidden; transition: 0.3s; backdrop-filter: blur(5px); }
details[open] { border-color: var(--gold-primary); background: rgba(255,255,255,0.05); }
summary { padding: 16px 20px; cursor: pointer; font-weight: 600; list-style: none; position: relative; font-size: 0.95rem; padding-right: 40px; }
summary::after { 
  content: ''; position: absolute; right: 20px; top: 50%; transform: translateY(-50%); width: 12px; height: 12px; 
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23D4AF37' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='12' y1='5' x2='12' y2='19'%3E%3C/line%3E%3Cline x1='5' y1='12' x2='19' y2='12'%3E%3C/line%3E%3C/svg%3E") no-repeat center;
}
details[open] summary::after { 
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23D4AF37' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='5' y1='12' x2='19' y2='12'%3E%3C/line%3E%3C/svg%3E") no-repeat center;
}
details div { padding: 0 20px 20px; color: #aaa; font-size: 0.9rem; line-height: 1.6; }

.gallery-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 10px; }
.gallery-grid img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; filter: grayscale(30%); transition: 0.5s; cursor: pointer; background: #111; }
.gallery-grid img:hover { filter: grayscale(0); transform: scale(1.05); z-index: 2; }

/* === MODALS & WIDGETS === */
.modal { position: fixed; inset: 0; z-index: 200; background: rgba(0,0,0,0.95); display: none; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
.modal.open { display: flex; }
.close-btn { position: absolute; top: 20px; right: 20px; color: #fff; font-size: 2rem; background: none; border: none; cursor: pointer; z-index: 201; }

/* Video Widget */
.video-widget {
  position: fixed; bottom: 80px; right: 20px; width: 100px; height: 160px;
  border-radius: 16px; overflow: hidden; z-index: 900; cursor: pointer;
  border: 2px solid var(--gold-primary); transition: 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: 0 10px 30px rgba(0,0,0,0.5); background: #000;
}
.video-widget:hover { transform: scale(1.05); }
.video-widget.expanded { width: 300px; height: 520px; bottom: 20px; right: 20px; }
.video-widget video { width: 100%; height: 100%; object-fit: cover; display: block; }
.vid-badge { position: absolute; top: -5px; left: -5px; background: #c00; color: #fff; font-size: 0.7rem; padding: 4px 8px; border-radius: 10px; font-weight: bold; animation: pulse 2s infinite; z-index: 3; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
@media (max-width: 600px) { .video-widget { bottom: 90px; right: 10px; width: 80px; height: 120px; } .video-widget.expanded { width: 90vw; height: 70vh; bottom: 80px; } }

/* Sticky Mobile Bar */
.mobile-sticky-bar { position: fixed; bottom: 0; left: 0; right: 0; z-index: 800; background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(10px); border-top: 1px solid #333; padding: 12px 20px; display: flex; gap: 10px; align-items: center; justify-content: space-between; transform: translateY(100%); transition: 0.4s; }
.mobile-sticky-bar.visible { transform: translateY(0); }
.sticky-btn { flex: 1; background: var(--gradient-gold); color: #000; font-weight: 700; border-radius: 8px; padding: 12px; text-align: center; font-size: 0.9rem; }
.sticky-icon { width: 44px; height: 44px; border-radius: 8px; background: #222; color: #fff; display: flex; align-items: center; justify-content: center; }
@media (min-width: 768px) { .mobile-sticky-bar { display: none; } }

</style>
</head>
<body>

<div class="magic-cursor"></div>

<canvas id="webgl-canvas"></canvas>

<div class="preloader">
  <div class="preloader-text">KOSTYUK.MAGIC</div>
</div>

<header class="header">
  <div class="container nav-flex">
    <div class="logo">KOSTYUK<span>.MAGIC</span></div>
    <button class="burger" onclick="toggleMenu()">
      <svg class="icon-svg" style="width:32px;height:32px;" viewBox="0 0 24 24"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
    </button>
  </div>
</header>

<div class="mobile-menu" id="mobileMenu">
  <a href="#hero" class="menu-link" onclick="toggleMenu()">–ì–ª–∞–≤–Ω–∞—è</a>
  <a href="#formats" class="menu-link" onclick="toggleMenu()">–®–æ—É</a>
  <a href="#calc" class="menu-link" onclick="toggleMenu()">–°—Ç–æ–∏–º–æ—Å—Ç—å</a>
  <a href="#gallery" class="menu-link" onclick="toggleMenu()">–ì–∞–ª–µ—Ä–µ—è</a>
</div>

<section id="hero" class="hero">
  <div class="hero-img"></div>
  <div class="container">
    <div class="hero-content">
      <h1 class="hero-title">–ú–∞–≥–∏—è <br><span class="text-gold">–í—ã—Å–æ–∫–æ–≥–æ –£—Ä–æ–≤–Ω—è</span></h1>
      <p class="hero-desc">–ü—Ä–µ–º–∏–∞–ª—å–Ω–æ–µ —à–æ—É –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –≤–∏–¥–µ–ª –≤—Å—ë. –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ. –°—Ç–∏–ª—å–Ω–æ. –î–æ—Ä–æ–≥–æ.</p>
      <div class="hero-btns">
        <a href="#calc" class="btn btn-primary">
          <svg class="icon-svg" viewBox="0 0 24 24" style="width:20px;height:20px;"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
          –†–∞—Å—Å—á–∏—Ç–∞—Ç—å
        </a>
        <button class="btn btn-glass" onclick="openVideo()">
          <svg class="icon-svg" viewBox="0 0 24 24" style="width:20px;height:20px;"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
          –®–æ—É—Ä–∏–ª
        </button>
      </div>
      <div class="hero-stats">
        <div class="stat"><h4><span id="showsCount">1800</span>+</h4><p>–®–æ—É</p></div>
        <div class="stat"><h4><span id="expYears">7</span> –ª–µ—Ç</h4><p>–û–ø—ã—Ç–∞</p></div>
        <div class="stat"><h4>5.0</h4><p>–†–µ–π—Ç–∏–Ω–≥</p></div>
      </div>
    </div>
  </div>
</section>

<div class="partners-section">
  <div class="container" style="overflow:hidden;">
    <p class="text-center" style="color:#666; font-size:0.75rem; margin-bottom:20px; letter-spacing:0.1em; text-transform:uppercase;">–ù–∞–º –¥–æ–≤–µ—Ä—è—é—Ç</p>
    <div class="partners-track">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Gazprom_logo.svg/512px-Gazprom_logo.svg.png" class="partner-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Sberbank_Logo.svg/512px-Sberbank_Logo.svg.png" class="partner-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/f3/Lukoil_Logo.svg" class="partner-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/0/03/Rostelecom_logo.svg" class="partner-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Tinkoff_Bank_logo_2024.svg/512px-Tinkoff_Bank_logo_2024.svg.png" class="partner-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Gazprom_logo.svg/512px-Gazprom_logo.svg.png" class="partner-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Sberbank_Logo.svg/512px-Sberbank_Logo.svg.png" class="partner-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/f3/Lukoil_Logo.svg" class="partner-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/0/03/Rostelecom_logo.svg" class="partner-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Tinkoff_Bank_logo_2024.svg/512px-Tinkoff_Bank_logo_2024.svg.png" class="partner-logo">
    </div>
  </div>
</div>

<section id="formats" class="section-py">
  <div class="container">
    <h2 class="text-center gs-reveal" style="font-family:var(--ff-head); font-size:2.5rem; margin-bottom:50px;">–§–æ—Ä–º–∞—Ç—ã</h2>
    <div class="grid-cards">
      <div class="card">
        <div class="card-icon-wrap">
          <svg class="icon-svg icon-large" viewBox="0 0 24 24"><path d="M8 21h8m-4-4v4m0-4L3 6a2 2 0 0 1 1.7-3h14.6a2 2 0 0 1 1.7 3l-9 11z"></path></svg>
        </div>
        <h3>–ú–∏–∫—Ä–æ–º–∞–≥–∏—è</h3>
        <span class="card-price">–æ—Ç 13 000 ‚ÇΩ</span>
        <ul><li>Welcome-–∑–æ–Ω–∞</li><li>–§–æ–∫—É—Å—ã –≤ —Ä—É–∫–∞—Ö –≥–æ—Å—Ç–µ–π</li><li>–õ–µ–¥–æ–∫–æ–ª –¥–ª—è –æ–±—â–µ–Ω–∏—è</li></ul>
      </div>
      <div class="card" style="border-color:var(--gold-dark);">
        <div class="card-icon-wrap">
          <svg class="icon-svg icon-large" viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>
        </div>
        <h3>–°—Ü–µ–Ω–∏—á–µ—Å–∫–æ–µ —à–æ—É</h3>
        <span class="card-price">–æ—Ç 17 500 ‚ÇΩ</span>
        <ul><li>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ —Å –∑–∞–ª–æ–º</li><li>–ß—Ç–µ–Ω–∏–µ –º—ã—Å–ª–µ–π</li><li>–ö–æ–º–µ–¥–∏—è</li></ul>
      </div>
      <div class="card">
        <div class="card-icon-wrap">
          <svg class="icon-svg icon-large" viewBox="0 0 24 24"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path></svg>
        </div>
        <h3>–®–æ—É ¬´–°–ï–ö–†–ï–¢¬ª</h3>
        <span class="card-price">–æ—Ç 150 000 ‚ÇΩ</span>
        <ul><li>–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–æ–Ω—Ü–µ—Ä—Ç</li><li>–ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–π —Å–ø–µ–∫—Ç–∞–∫–ª—å</li><li>–î–ª—è –±–æ–ª—å—à–∏—Ö –∑–∞–ª–æ–≤</li></ul>
      </div>
    </div>
  </div>
</section>

<section id="calc" class="section-py">
  <div class="container gs-reveal">
    <h2 class="text-center" style="font-family:var(--ff-head); font-size:2.5rem; margin-bottom:40px;">–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ 3 —à–∞–≥–∞</h2>
    <div class="wizard-box">
      <div class="wizard-progress"><div class="progress-bar" id="wizProgress"></div></div>
      
      <div class="wizard-step active" id="step1">
        <h3 class="step-title">1. –ì–¥–µ –∏ –∫–æ–≥–¥–∞?</h3>
        <label>–†–µ–≥–∏–æ–Ω</label>
        <select id="area" class="input-field" onchange="updateCities()"><option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –æ–±–ª–∞—Å—Ç—å</option></select>
        <label>–ì–æ—Ä–æ–¥</label>
        <select id="city" class="input-field" disabled><option>–°–Ω–∞—á–∞–ª–∞ –æ–±–ª–∞—Å—Ç—å</option></select>
        <label>–î–∞—Ç–∞</label>
        <input type="date" id="date" class="input-field">
        <div class="wiz-controls"><button class="btn btn-primary" onclick="nextStep(2)" style="width:100%">–î–∞–ª–µ–µ ‚Üí</button></div>
      </div>
      
      <div class="wizard-step" id="step2">
        <h3 class="step-title">2. –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥–∏ (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ)</h3>
        
        <div id="svcOptions" class="svc-grid"></div>

        <label style="margin-top:20px;">–ì–æ—Å—Ç–µ–π: <span id="gLabel" style="color:var(--gold-primary)">50</span></label>
        <input type="range" id="gRange" min="10" max="300" value="50" oninput="document.getElementById('gLabel').innerText=this.value" class="input-field" style="height:6px; padding:0">
        <div class="wiz-controls">
          <button class="btn btn-glass" onclick="nextStep(1)">–ù–∞–∑–∞–¥</button>
          <button class="btn btn-primary" onclick="calcResult()" style="flex:1">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
        </div>
      </div>
      
      <div class="wizard-step" id="step3">
        <h3 class="step-title text-center">–í–∞—à–∞ —Å–º–µ—Ç–∞</h3>
        <div class="receipt">
          <div class="receipt-row"><span>–ü—Ä–æ–≥—Ä–∞–º–º–∞</span><strong id="rSvc" style="text-align:right">...</strong></div>
          <div class="receipt-row"><span>–õ–æ–≥–∏—Å—Ç–∏–∫–∞</span><span id="rRoad">0 ‚ÇΩ</span></div>
          <div class="receipt-row"><span>–ì–æ—Å—Ç–∏</span><span id="rGuest">0 ‚ÇΩ</span></div>
          <div class="receipt-row"><span>–°–µ–∑–æ–Ω–Ω—ã–π –∫–æ—ç—Ñ.</span><span id="rCoef">1.0</span></div>
          <div class="receipt-row" style="color:var(--gold-primary)"><span>–°–∫–∏–¥–∫–∞</span><span id="rDisc">0 ‚ÇΩ</span></div>
          
          <div id="bonusContainer"></div>

          <span class="receipt-total" id="rTotal">0 ‚ÇΩ</span>
        </div>
        <div class="wiz-controls" style="flex-direction:column">
          <a href="#order" class="btn btn-primary" style="width:100%">–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</a>
          <button class="btn btn-glass" onclick="nextStep(2)" style="width:100%; border:none">–ò–∑–º–µ–Ω–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section-py game-section">
  <div class="container gs-reveal">
    <h2 style="font-family:var(--ff-head); font-size:2rem;">–ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É</h2>
    <p style="color:#888;">–ù–∞–π–¥–∏ <span style="color:#fff">–¢—É–∑–∞ –ü–∏–∫</span>. –®–∞–Ω—Å —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏.</p>
    <div class="deck" id="gameDeck"></div>
    <div id="gameMsg" style="min-height:24px; color:var(--gold-light); font-weight:bold;"></div>
  </div>
</section>

<section class="section-py">
  <div class="container gs-reveal">
    <h2 class="text-center" style="font-family:var(--ff-head); font-size:2rem; margin-bottom:40px;">–û—Ç–∑—ã–≤—ã</h2>
    <div class="reviews-grid">
      <div class="review-card">
        <div class="stars">
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
        </div>
        <p class="review-text">"–î–º–∏—Ç—Ä–∏–π, —ç—Ç–æ –±—ã–ª —Ä–∞–∑—Ä—ã–≤! –ì–æ—Å—Ç–∏ –¥–æ —Å–∏—Ö –ø–æ—Ä –æ–±—Å—É–∂–¥–∞—é—Ç, –∫–∞–∫ –≤—ã —É–≥–∞–¥–∞–ª–∏ –ø–∏–Ω-–∫–æ–¥ –æ—Ç –∫–∞—Ä—Ç—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ —ç–º–æ—Ü–∏–∏!"</p>
        <div class="review-author">–ï–ª–µ–Ω–∞, HR-–¥–∏—Ä–µ–∫—Ç–æ—Ä</div>
      </div>
      <div class="review-card">
        <div class="stars">
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
          <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
        </div>
        <p class="review-text">"–†–∞–±–æ—Ç–∞–µ–º —Å –î–º–∏—Ç—Ä–∏–µ–º —É–∂–µ —Ç—Ä–µ—Ç–∏–π –≥–æ–¥ –Ω–∞ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏—Ö –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–∞—Ö. –í—Å–µ–≥–¥–∞ –Ω–æ–≤–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏ –≤–∞—É-—ç—Ñ—Ñ–µ–∫—Ç."</p>
        <div class="review-author">–ê–≥–µ–Ω—Ç—Å—Ç–≤–æ "–ü—Ä–∞–∑–¥–Ω–∏–∫"</div>
      </div>
    </div>
  </div>
</section>

<section id="gallery" class="section-py">
  <div class="container gs-reveal">
    <h2 class="text-center" style="font-family:var(--ff-head); font-size:2rem; margin-bottom:30px;">–ì–∞–ª–µ—Ä–µ—è</h2>
    <div class="gallery-grid" id="galGrid"></div>
  </div>
</section>

<section class="section-py">
  <div class="container gs-reveal">
    <h2 class="text-center" style="font-family:var(--ff-head); font-size:2.5rem; margin-bottom:40px;">–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
    <div class="faq-grid" id="faqContainer"></div>
  </div>
</section>

<section id="order" class="section-py">
  <div class="container gs-reveal" style="max-width:500px; text-align:center;">
    <h2 style="font-family:var(--ff-head); font-size:2rem; margin-bottom:20px;">–°–≤—è–∑—å</h2>
    <form id="tgForm">
      <input type="text" name="name" placeholder="–í–∞—à–µ –ò–º—è" class="input-field" required>
      <input type="tel" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" class="input-field" required>
      <textarea name="msg" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π / –î–∞—Ç–∞" class="input-field" rows="3"></textarea>
      <input type="hidden" name="bonuses" id="formBonuses">
      <input type="hidden" name="services" id="formServices">
      <input type="text" name="website" id="hp_website" tabindex="-1" autocomplete="off" style="position:absolute;left:-9999px;height:0;width:0;opacity:0" aria-hidden="true">
      <button class="btn btn-primary" style="width:100%">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>
  </div>
</section>

<footer style="text-align:center; padding:40px 0; color:#444; font-size:0.8rem;">¬© 2025 –î–º–∏—Ç—Ä–∏–π –ö–æ—Å—Ç—é–∫</footer>

<div class="video-widget" id="vidWidget">
  <div class="vid-badge">1</div>
  <video id="myVid" src="https://assets.mixkit.co/videos/preview/mixkit-magician-performing-a-card-trick-3990-large.mp4" poster="images/portrait.jpg" loop muted playsinline></video>
</div>

<div class="mobile-sticky-bar" id="stickyBar">
  <a href="https://t.me/Dmitrokko" class="sticky-icon">
    <svg class="icon-svg" viewBox="0 0 24 24" style="fill:currentColor;stroke:none;"><path d="M21.93 3.37a1.93 1.93 0 0 0-2-.28l-17 7.14a2 2 0 0 0 .23 3.71l4.67 1.35 1.75 5.42a2 2 0 0 0 3.28.86l2.55-2.11 4.9 3.63a2 2 0 0 0 3.24-1.73l3-16.2a1.93 1.93 0 0 0-1.62-2.19z"></path></svg>
  </a>
  <a href="#calc" class="sticky-btn">–£–∑–Ω–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å</a>
</div>

<div class="modal" id="modalVideo">
  <div class="modal-content" style="width:800px; aspect-ratio:16/9; background:#000">
    <button class="close-btn" onclick="closeVideo()">√ó</button>
    <div id="vidContainer" style="width:100%; height:100%"></div>
  </div>
</div>

<div class="modal" id="modalImg" onclick="this.classList.remove('open')">
  <button class="close-btn">√ó</button>
  <img id="lbImg" src="" style="max-width:95vw; max-height:90vh; border-radius:8px;">
</div>

<script>
/* === CONTENT GENERATION === */
window.addEventListener("DOMContentLoaded", () => {
  // FAQ
  const faqData = [
    { q: "–ó–∞ —Å–∫–æ–ª—å–∫–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–∞—Ç—É?", a: "–û–±—ã—á–Ω–æ –∑–∞ 1‚Äì2 –Ω–µ–¥–µ–ª–∏; –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –¥–∞—Ç—ã ‚Äî –∑–∞ –º–µ—Å—è—Ü –∏ —Ä–∞–Ω—å—à–µ." },
    { q: "–ö–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä –∑–∞–¥–∞—Ç–∫–∞?", a: "50 % –æ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–π —Å—É–º–º—ã. –û—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –≤ –¥–µ–Ω—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è." },
    { q: "–í—Å—ë –ª–∏ –≤—Ö–æ–¥–∏—Ç –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å?", a: "–î–∞, —Ü–µ–Ω–∞ ¬´–ø–æ–¥ –∫–ª—é—á¬ª –±–µ–∑ —Å–∫—Ä—ã—Ç—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π." },
    { q: "–°–∫–æ–ª—å–∫–æ –¥–ª–∏—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∞?", a: "–ß–∞—Å—Ç–Ω—ã–µ —à–æ—É ‚Äî 20‚Äì40 –º–∏–Ω, –º–∏–∫—Ä–æ–º–∞–≥–∏—è ‚Äî –¥–æ 3 —á, –∫–æ–Ω—Ü–µ—Ä—Ç ‚Äî 1‚Äì2 —á." },
    { q: "–ú–æ–∂–Ω–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä—é–∫?", a: "–î–∞! –ü–æ–¥–≥–æ—Ç–æ–≤–∏–º –Ω–æ–º–µ—Ä –ø–æ–¥ –≤–∞—à–µ–≥–æ –∏–º–µ–Ω–∏–Ω–Ω–∏–∫–∞/–±—Ä–µ–Ω–¥/—Å–æ–±—ã—Ç–∏–µ." },
    { q: "–ù—É–∂–Ω–∞ –ª–∏ —Å—Ü–µ–Ω–∞?", a: "–ß–∞—â–µ –Ω–µ—Ç. –î–ª—è –±–æ–ª—å—à–∏—Ö –∑–∞–ª–æ–≤ –∏ –∫–æ–Ω—Ü–µ—Ä—Ç–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã ‚Äî –ø–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é." },
    { q: "–ß—Ç–æ –ø–æ –∑–≤—É–∫—É –∏ –∞–ø–ø–∞—Ä–∞—Ç—É—Ä–µ?", a: "–° –≤–µ–¥—É—â–∏–º ‚Äî –≤—Å—ë –≥–æ—Ç–æ–≤–æ. –ë–µ–∑ –≤–µ–¥—É—â–µ–≥–æ –Ω—É–∂–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞/–º–∏–∫—Ä–æ—Ñ–æ–Ω. –î–ª—è –∫–æ–Ω—Ü–µ—Ä—Ç–∞ ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ä–∞–π–¥–µ—Ä." },
    { q: "–°–∫–æ–ª—å–∫–æ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞?", a: "–û–∫–æ–ª–æ 30 –º–∏–Ω; –¥–ª—è –∫–æ–Ω—Ü–µ—Ä—Ç–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã ‚Äî –¥–æ 1 —á." },
    { q: "–í—ã–µ–∑–∂–∞–µ—Ç–µ –≤ –¥—Ä—É–≥–∏–µ —Ä–µ–≥–∏–æ–Ω—ã?", a: "–î–∞, —Ä–∞–±–æ—Ç–∞—é –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–±–ª–∞—Å—Ç—è—Ö –∏ –≤—ã–µ–∑–∂–∞—é –ø–æ —Å—Ç—Ä–∞–Ω–µ." },
    { q: "–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã?", a: "–ë–µ–∑–Ω–∞–ª, –°–ë–ü, –Ω–∞–ª–∏—á–Ω—ã–µ. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –¥–æ–≥–æ–≤–æ—Ä –∏ —á–µ–∫." },
    { q: "–ö–∞–∫–æ–π –≤–æ–∑—Ä–∞—Å—Ç –¥–ª—è –¥–µ—Ç—Å–∫–∏—Ö —à–æ—É?", a: "–î–ª—è –¥–µ—Ç–µ–π 8+; –¥–ª—è –º–ª–∞–¥—à–∏—Ö ‚Äî –ø–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é –∏ —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–∞." },
    { q: "–ú–æ–∂–Ω–æ —Å–Ω–∏–º–∞—Ç—å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ?", a: "–î–∞, —Å—ä—ë–º–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è." },
    { q: "–ï—Å—Ç—å –ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ?", a: "–î–∞, —Ä–∞–±–æ—Ç–∞—é –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é –∫–∞—Å—Å–æ–≤—ã–π —á–µ–∫." },
    { q: "–í–æ–∑–º–æ–∂–Ω–∞ –ø–ª–æ—â–∞–¥–∫–∞ –ø–æ–¥ –æ—Ç–∫—Ä—ã—Ç—ã–º –Ω–µ–±–æ–º?", a: "–õ–µ—Ç–æ–º –ø—Ä–∏ –±–µ–∑–≤–µ—Ç—Ä–µ–Ω–Ω–æ–π –ø–æ–≥–æ–¥–µ, —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –ø–ª–∞–Ω–æ–º –Ω–∞ –¥–æ–∂–¥—å." },
    { q: "–ë–µ–∑–æ–ø–∞—Å–Ω—ã –ª–∏ —Å–ø–µ—Ü—ç—Ñ—Ñ–µ–∫—Ç—ã?", a: "–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã." },
    { q: "–ú–æ–∂–Ω–æ –ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±—Ä–µ–Ω–¥ –∫–æ–º–ø–∞–Ω–∏–∏?", a: "–î–∞, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º –ª–æ–≥–æ –∏ —Å–º—ã—Å–ª—ã –±—Ä–µ–Ω–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ –∏ –Ω–æ–º–µ—Ä–∞." },
    { q: "–ß—Ç–æ –µ—Å–ª–∏ –¥–∞—Ç–∞ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è?", a: "–ü–µ—Ä–µ–Ω–æ—Å –≤–æ–∑–º–æ–∂–µ–Ω –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Å–ª–æ—Ç–∞; —É—Å–ª–æ–≤–∏—è —Ñ–∏–∫—Å–∏—Ä—É–µ–º –≤ –¥–æ–≥–æ–≤–æ—Ä–µ." },
    { q: "–ö–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –ø–æ–¥—Ö–æ–¥–∏—Ç?", a: "–û—Ç –∫–∞–º–µ—Ä–Ω—ã—Ö –≤–µ—á–µ—Ä–∏–Ω–æ–∫ 10‚Äì20 –≥–æ—Å—Ç–µ–π –¥–æ –∑–∞–ª–æ–≤ –Ω–∞ 500+ —á–µ–ª–æ–≤–µ–∫." },
    { q: "–ü—Ä–æ–≤–æ–¥–∏—Ç–µ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã?", a: "–î–∞: 60 –º–∏–Ω –æ–±—É—á–µ–Ω–∏—è + —Ä–µ–∫–≤–∏–∑–∏—Ç, —É—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ñ–æ–∫—É—Å —Å—Ä–∞–∑—É." }
  ];
  document.getElementById('faqContainer').innerHTML = faqData.map(f => `<details><summary>${f.q}</summary><div>${f.a}</div></details>`).join('');

  // Gallery
  const galGrid = document.getElementById('galGrid');
  for(let i=0; i<6; i++){
    const img = document.createElement('img'); 
    img.src = `images/gallery/event-0${i+1}.webp`;
    img.onerror = () => img.src = `https://via.placeholder.com/300x200/111/333?text=Photo+${i+1}`;
    img.onclick = () => { document.getElementById('lbImg').src=img.src; document.getElementById('modalImg').classList.add('open'); };
    galGrid.appendChild(img);
  }

  // Init Logic
  initThreeJS();
  updateServices();
  
  // Animations
  document.body.style.opacity = 1; document.body.style.visibility = "visible";
  const tl = gsap.timeline();
  tl.to(".preloader-text", { opacity: 1, duration: 0.8 })
    .to(".preloader", { yPercent: -100, duration: 1, ease: "power4.inOut" }, "+=0.5")
    .from(".hero-title", { y: 100, opacity: 0, duration: 1, ease: "power3.out" }, "-=0.5")
    .from(".hero-desc", { y: 30, opacity: 0, duration: 0.8 }, "-=0.6")
    .from(".hero-btns", { y: 30, opacity: 0, duration: 0.8 }, "-=0.6")
    .from(".hero-stats", { opacity: 1, duration: 1 }, "-=0.5");

  gsap.utils.toArray(".card").forEach((card, i) => {
    gsap.to(card, { scrollTrigger: { trigger: card, start: "top 85%" }, y: 0, opacity: 1, duration: 0.8, delay: i*0.1, ease: "power3.out" });
  });
  gsap.utils.toArray(".gs-reveal").forEach(elem => {
    gsap.from(elem, { scrollTrigger: { trigger: elem, start: "top 80%" }, y: 40, opacity: 0, duration: 1, ease: "power3.out" });
  });
});

/* === AUDIO UX === */
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playHoverSound() {
  if(audioCtx.state === 'suspended') audioCtx.resume();
  const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain();
  osc.type = 'sine'; osc.frequency.setValueAtTime(400, audioCtx.currentTime);
  osc.frequency.exponentialRampToValueAtTime(600, audioCtx.currentTime+0.1);
  gain.gain.setValueAtTime(0.05, audioCtx.currentTime); gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime+0.1);
  osc.connect(gain); gain.connect(audioCtx.destination);
  osc.start(); osc.stop(audioCtx.currentTime+0.1);
}
function playClickSound() {
  if(audioCtx.state === 'suspended') audioCtx.resume();
  const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain();
  osc.type = 'triangle'; osc.frequency.setValueAtTime(300, audioCtx.currentTime);
  osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime+0.15);
  gain.gain.setValueAtTime(0.1, audioCtx.currentTime); gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime+0.15);
  osc.connect(gain); gain.connect(audioCtx.destination);
  osc.start(); osc.stop(audioCtx.currentTime+0.15);
}
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('a, button, .card, input, select, .card-play, .svc-btn').forEach(el => {
    el.addEventListener('mouseenter', playHoverSound);
    el.addEventListener('click', playClickSound);
  });
});

/* === TELEGRAM BOT === */
const TG_TOKEN = "7838972787:AAHaLNVe6xqEnzE5qy5Uh2TwSb66LWYIUhI";
const CHAT_ID = '–í–°–¢–ê–í–¨_–°–Æ–î–ê_–¶–ò–§–†–´_CHAT_ID'; 

document.getElementById('tgForm').onsubmit = async (e) => {
  e.preventDefault();
  if(document.getElementById('hp_website').value) return;

  const btn = e.target.querySelector('button');
  const oldText = btn.innerText;

  if(CHAT_ID.includes('CHAT_ID')) { alert('–í—Å—Ç–∞–≤—å CHAT_ID –≤ –∫–æ–¥!'); return; }

  btn.innerText = '–û—Ç–ø—Ä–∞–≤–∫–∞...'; btn.disabled = true;
  const fData = new FormData(e.target);
  const bonuses = document.getElementById('formBonuses').value || '–ù–µ—Ç';
  const services = document.getElementById('formServices').value || '–ù–µ –≤—ã–±—Ä–∞–Ω–æ';
  
  const text = `üî• *–ó–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞!*\n\nüë§ ${fData.get('name')}\nüì± ${fData.get('phone')}\nüé© –£—Å–ª—É–≥–∏: ${services}\nüéÅ –ë–æ–Ω—É—Å—ã: ${bonuses}\nüìù –ò–Ω—Ñ–æ: ${fData.get('msg')}`;

  try {
    const res = await fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
      method: 'POST', headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ chat_id: CHAT_ID, text: text, parse_mode: 'Markdown' })
    });
    if(res.ok) {
      btn.innerText = '–£—Å–ø–µ—à–Ω–æ!'; btn.style.background = '#28a745'; e.target.reset();
      if(typeof ym !== 'undefined') ym(104290205,'reachGoal','order_submit');
    } else throw new Error();
  } catch (err) {
    alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏.'); btn.innerText = oldText; btn.disabled = false;
  }
};

/* === WIZARD LOGIC === */
function toggleMenu(){ document.getElementById('mobileMenu').classList.toggle('open'); document.querySelector('.burger').classList.toggle('active'); }

const travel={ "–í–æ–ª–æ–≥–æ–¥—Å–∫–∞—è":{fee:9000,cities:{–í–æ–ª–æ–≥–¥–∞:9000,–ß–µ—Ä–µ–ø–æ–≤–µ—Ü:15000,–°–æ–∫–æ–ª:12000}}, "–í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è":{fee:10000,cities:{–í–ª–∞–¥–∏–º–∏—Ä:10000,–ö–æ–≤—Ä–æ–≤:10000,–ú—É—Ä–æ–º:17000,"–ì—É—Å—å —Ö—Ä—É—Å—Ç–∞–ª—å–Ω—ã–π":13500}}, "–ò–≤–∞–Ω–æ–≤—Å–∫–∞—è":{fee:5000,cities:{–ò–≤–∞–Ω–æ–≤–æ:2000,–ö–∏–Ω–µ—à–º–∞:3500,–®—É—è:3000,–¢–µ–π–∫–æ–≤–æ:2500}}, "–ö–æ—Å—Ç—Ä–æ–º—Å–∫–∞—è":{fee:3000,cities:{–ö–æ—Å—Ç—Ä–æ–º–∞:2000,–®–∞—Ä—å—è:6000,–ù–µ—Ä–µ—Ö—Ç–∞:2000}}, "–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è":{fee:1000,cities:{–Ø—Ä–æ—Å–ª–∞–≤–ª—å:0,–†—ã–±–∏–Ω—Å–∫:2000,–¢—É—Ç–∞–µ–≤:2000,–£–≥–ª–∏—á:2000,–†–æ—Å—Ç–æ–≤:2000}} };
const services={
  close: { "–ú–∏–∫—Ä–æ–º–∞–≥–∏—è (30 –º–∏–Ω)": 13000, "–ú–∏–∫—Ä–æ–º–∞–≥–∏—è (1 —á–∞—Å)": 20000, "–ú–∏–∫—Ä–æ–º–∞–≥–∏—è (2 —á–∞—Å–∞)": 30000, "–ú–∏–∫—Ä–æ–º–∞–≥–∏—è (3 —á–∞—Å–∞)": 36000 },
  std: { "–í–∑—Ä–æ—Å–ª–æ–µ —à–æ—É (20 –º–∏–Ω)": 17500, "–í–∑—Ä–æ—Å–ª–æ–µ —à–æ—É (30 –º–∏–Ω)": 23750, "–í–∑—Ä–æ—Å–ª–æ–µ —à–æ—É (40 –º–∏–Ω)": 30000 },
  spec: { "–°–≤–∞–¥–µ–±–Ω–æ–µ —à–æ—É (20 –º–∏–Ω)": 26250, "–°–≤–∞–¥–µ–±–Ω–æ–µ —à–æ—É (30 –º–∏–Ω)": 32500 },
  kids: { "–î–µ—Ç—Å–∫–æ–µ —à–æ—É (30 –º–∏–Ω)": 11250, "–î–µ—Ç—Å–∫–æ–µ —à–æ—É (40 –º–∏–Ω)": 13750 },
  conc: { "–ö–æ–Ω—Ü–µ—Ä—Ç ¬´–°–ï–ö–†–ï–¢¬ª (–º–∏–Ω–∏)": 150000, "–ö–æ–Ω—Ü–µ—Ä—Ç ¬´–°–ï–ö–†–ï–¢¬ª (–ø–æ–ª–Ω—ã–π)": 300000 }
};
const catNames = { close: "–ú–∏–∫—Ä–æ–º–∞–≥–∏—è (Welcome)", std: "–°—Ü–µ–Ω–∏—á–µ—Å–∫–æ–µ —à–æ—É (–ë–∞–Ω–∫–µ—Ç)", spec: "–°–≤–∞–¥—å–±—ã –∏ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤—ã", kids: "–î–µ—Ç—Å–∫–∏–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏", conc: "–ö–æ–Ω—Ü–µ—Ä—Ç–Ω—ã–µ —à–æ—É" };
const els={area:document.getElementById('area'),city:document.getElementById('city'),svcGrid:document.getElementById('svcOptions'),date:document.getElementById('date'),gRange:document.getElementById('gRange')};
Object.keys(travel).forEach(k=>els.area.add(new Option(k,k)));

function updateCities(){els.city.innerHTML='<option disabled selected>–ì–æ—Ä–æ–¥</option>';els.city.disabled=false;Object.keys(travel[els.area.value].cities).forEach(c=>els.city.add(new Option(c,c)));}

let selectedServices = [];

function updateServices(){
  els.svcGrid.innerHTML='';
  selectedServices = []; 
  
  Object.keys(services).forEach(catKey => {
    const wrapper = document.createElement('div');
    wrapper.className = 'svc-category-group';
    
    const header = document.createElement('div');
    header.className = 'svc-group-title';
    header.innerText = catNames[catKey];
    wrapper.appendChild(header);

    const grid = document.createElement('div');
    grid.className = 'svc-grid';

    Object.keys(services[catKey]).forEach(sName => {
      const sPrice = services[catKey][sName];
      const btn = document.createElement('div');
      btn.className = 'svc-btn';
      btn.innerHTML = `<span class="svc-name">${sName}</span><span class="svc-cost">${sPrice.toLocaleString()} ‚ÇΩ</span>`;
      btn.onclick = () => toggleService(btn, sName, sPrice);
      grid.appendChild(btn);
    });
    wrapper.appendChild(grid);
    els.svcGrid.appendChild(wrapper);
  });
}

function toggleService(btn, name, price) {
  const idx = selectedServices.findIndex(s => s.name === name);
  if (idx > -1) {
    selectedServices.splice(idx, 1);
    btn.classList.remove('selected');
  } else {
    selectedServices.push({name, price});
    btn.classList.add('selected');
  }
  playClickSound();
}

function nextStep(n){
  if(n===2 && (!els.area.value||!els.city.value)){alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω –∏ –≥–æ—Ä–æ–¥');return;}
  document.querySelectorAll('.wizard-step').forEach(e=>e.classList.remove('active'));
  document.getElementById('step'+n).classList.add('active');
  document.getElementById('wizProgress').style.width=(n*33)+'%';
}

function calcResult(){
  if (selectedServices.length === 0) { alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —É—Å–ª—É–≥—É'); return; }

  let base = selectedServices.reduce((sum, s) => sum + s.price, 0);
  let road=travel[els.area.value].cities[els.city.value];
  if(els.area.value==='–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è'&&els.city.value==='–Ø—Ä–æ—Å–ª–∞–≤–ª—å') base+=1000;
  let g=parseInt(els.gRange.value); let gFee=g>50?(g-50)*50:0;
  let coef=1; if(els.date.value){const d=new Date(els.date.value);if(d.getMonth()===11&&d.getDate()>15)coef=1.5;}
  
  const raw=(base+road+gFee)*coef;
  const isGameWinner = localStorage.getItem('game_win') === 'true';
  const isBundle = selectedServices.length >= 2;
  
  let discPercent = 0;
  let discReason = '–ù–µ—Ç';

  if (isGameWinner) { discPercent = 20; discReason = '20% (–ü–æ–±–µ–¥–∞)'; }
  else if (isBundle) { discPercent = 10; discReason = '10% (–ü–∞–∫–µ—Ç —É—Å–ª—É–≥)'; }

  const disc = Math.round(raw * (discPercent / 100));
  const total = raw - disc;

  document.getElementById('rSvc').innerHTML = selectedServices.map(s => s.name).join('<br>');
  document.getElementById('rRoad').innerText=road.toLocaleString()+' ‚ÇΩ';
  document.getElementById('rGuest').innerText=gFee.toLocaleString()+' ‚ÇΩ';
  document.getElementById('rCoef').innerText=coef>1?'x'+coef:'1.0';
  document.getElementById('rDisc').innerText=disc?`-${disc} ‚ÇΩ (${discReason})`:'0 ‚ÇΩ';
  document.getElementById('rTotal').innerText=total.toLocaleString()+' ‚ÇΩ';

  /* BONUS TIERS */
  const bContainer = document.getElementById('bonusContainer');
  bContainer.innerHTML = ''; 
  let activeBonuses = [];

  if (total >= 35000) {
    activeBonuses.push("üî• –û–ø–∞—Å–Ω—ã–π —Ç—Ä—é–∫");
    bContainer.innerHTML += `
      <div class="bonus-item bonus-tier-3">
        <svg class="icon-svg" viewBox="0 0 24 24"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg>
        <div class="bonus-text"><strong>–≠–∫—Å—Ç—Ä–∏–º</strong>–û–ø–∞—Å–Ω—ã–π —Ç—Ä—é–∫ –≤ –ø–æ–¥–∞—Ä–æ–∫!</div>
        <div class="gift-badge">–ë–ï–°–ü–õ–ê–¢–ù–û</div>
      </div>`;
  }
  if (total >= 20000) {
    activeBonuses.push("üéÅ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–∫—É—Å");
    bContainer.innerHTML += `
      <div class="bonus-item bonus-tier-2">
        <svg class="icon-svg" viewBox="0 0 24 24"><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></svg>
        <div class="bonus-text"><strong>VIP</strong>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–∫—É—Å</div>
        <div class="gift-badge">–ë–ï–°–ü–õ–ê–¢–ù–û</div>
      </div>`;
  }
  if (total >= 15000) {
    activeBonuses.push("üé´ 2 –ë–∏–ª–µ—Ç–∞");
    bContainer.innerHTML += `
      <div class="bonus-item bonus-tier-1">
        <svg class="icon-svg" viewBox="0 0 24 24"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
        <div class="bonus-text"><strong>–ë–æ–Ω—É—Å</strong>2 –ë–∏–ª–µ—Ç–∞ –Ω–∞ —à–æ—É <span class="bonus-note">(–ì–æ—Ä–æ–¥ –∏ –¥–∞—Ç—É —É—Ç–æ—á–Ω—è–π—Ç–µ)</span></div>
        <div class="gift-badge">–ë–ï–°–ü–õ–ê–¢–ù–û</div>
      </div>`;
  }
  document.getElementById('formBonuses').value = activeBonuses.join(', ');
  document.getElementById('formServices').value = selectedServices.map(s => s.name).join(', ') + ` [${discReason}]`;
  nextStep(3);
}

/* === GAME === */
const deck=document.getElementById('gameDeck'), msg=document.getElementById('gameMsg');
const suits=['‚ô†','‚ô•','‚ô£','‚ô¶'], ranks=['J','Q','K','A'];

function initGame(){
  const lastPlayed = localStorage.getItem('game_timestamp');
  const hasWon = localStorage.getItem('game_win') === 'true';
  const cooldown = 24 * 60 * 60 * 1000; 

  if (lastPlayed && (Date.now() - lastPlayed < cooldown)) {
    deck.innerHTML = `<div style="padding:20px;border:1px solid #333;border-radius:12px;background:#111"><h3>${hasWon ? '–°–∫–∏–¥–∫–∞ 20% –í–∞—à–∞!' : '–°–ª–µ–¥—É—é—â–∞—è –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–≤—Ç—Ä–∞'}</h3></div>`;
    if (hasWon) msg.innerHTML = '<span style="color:var(--gold-primary)">–ö–æ–¥ —Å–∫–∏–¥–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω</span>';
    return;
  }

  deck.innerHTML=''; 
  const winIdx=Math.floor(Math.random()*3);
  
  for(let i=0;i<3;i++){
    const isWin=(i===winIdx), suit=isWin?'‚ô†':suits[Math.floor(Math.random()*3)+1], rank=isWin?'A':ranks[Math.floor(Math.random()*3)];
    const c=document.createElement('div'); c.className='card-play';
    c.innerHTML=`<div class="face back"></div><div class="face front" style="color:${['‚ô†','‚ô£'].includes(suit)?'#000':'#c00'}">${rank}${suit}</div>`;
    
    c.onclick=()=>{
      if(localStorage.getItem('game_timestamp') && (Date.now() - localStorage.getItem('game_timestamp') < cooldown)) return;
      localStorage.setItem('game_timestamp', Date.now());
      document.querySelectorAll('.card-play').forEach(el=>el.classList.add('flipped'));
      if(isWin){
        msg.innerHTML='<span style="color:var(--gold-primary)">–ü–û–ë–ï–î–ê! –°–∫–∏–¥–∫–∞ 20%</span>';
        localStorage.setItem('game_win','true');
      } else {
        msg.textContent='–£–≤—ã, —Å–∫–∏–¥–∫–∏ –Ω–µ—Ç.';
        localStorage.setItem('game_win','false');
      }
    };
    deck.appendChild(c);
  }
}
initGame();

/* === DYNAMIC COUNTERS === */
(() => {
  const exp = new Date().getFullYear() - 2018;
  document.getElementById('expYears').innerText = exp;
  document.getElementById('showsCount').innerText = 1800 + (exp * 50);
})();

/* === MAGIC CURSOR === */
const cursor = document.querySelector('.magic-cursor');
if(window.matchMedia("(pointer: fine)").matches) {
  document.addEventListener('mousemove', e => {
    cursor.style.left = e.clientX + 'px'; cursor.style.top = e.clientY + 'px';
  });
}

window.addEventListener('scroll', () => {
  const heroH = document.getElementById('hero').offsetHeight;
  const bar = document.getElementById('stickyBar');
  if (window.scrollY > heroH) bar.classList.add('visible'); else bar.classList.remove('visible');
  document.querySelector('.header').classList.toggle('scrolled', window.scrollY > 50);
});

/* === VIDEO WIDGET === */
const vidW = document.getElementById('vidWidget');
const vid = document.getElementById('myVid');
let vidExp = false;
vidW.onclick = () => {
  vidExp = !vidExp; vidW.classList.toggle('expanded', vidExp);
  vid.muted = !vidExp; if(vidExp) vid.play();
}

function openVideo(){ document.getElementById('modalVideo').classList.add('open'); document.getElementById('vidContainer').innerHTML = '<iframe src="https://rutube.ru/play/embed/a692a6ad3b922abc4cfad5be5898431b?autoplay=1" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>'; }
function closeVideo(){ document.getElementById('modalVideo').classList.remove('open'); document.getElementById('vidContainer').innerHTML = ''; }

/* === THREE.JS === */
const initThreeJS = () => {
  const canvas = document.querySelector('#webgl-canvas');
  const scene = new THREE.Scene(); scene.fog = new THREE.FogExp2(0x000000, 0.001);
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.z = 10;
  const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

  const isMobile = window.innerWidth < 768;
  const count = isMobile ? 800 : 3000;
  const particlesGeo = new THREE.BufferGeometry();
  const posArray = new Float32Array(count * 3);
  for(let i=0; i<count*3; i++) posArray[i] = (Math.random() - 0.5) * 40;
  particlesGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
  const material = new THREE.PointsMaterial({ size: 0.05, color: 0xD4AF37, transparent: true, opacity: 0.8 });
  const particlesMesh = new THREE.Points(particlesGeo, material);
  scene.add(particlesMesh);

  let mouseX = 0; let mouseY = 0;
  document.addEventListener('mousemove', (event) => {
    mouseX = event.clientX - window.innerWidth / 2; mouseY = event.clientY - window.innerHeight / 2;
  });

  const clock = new THREE.Clock();
  const animate = () => {
    const elapsedTime = clock.getElapsedTime();
    particlesMesh.rotation.y += 0.05 * (mouseX * 0.001 - particlesMesh.rotation.y);
    particlesMesh.rotation.x += 0.05 * (mouseY * 0.001 - particlesMesh.rotation.x);
    particlesMesh.rotation.z = elapsedTime * 0.02;
    renderer.render(scene, camera);
    requestAnimationFrame(animate);
  };
  animate();
  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
};

/* === INPUT MASK === */
document.querySelectorAll('input[type="tel"]').forEach(input => {
  input.addEventListener('input', (e) => {
    let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
    if (!x[2] && x[1] !== '') { e.target.value = '+7 (' + x[1]; }
    else { e.target.value = !x[2] ? x[1] : '+7 (' + x[2] + (x[3] ? ') ' + x[3] : '') + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : ''); }
  });
});
</script>

<script type="text/javascript">
  (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
  m[i].l=1*new Date();for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
  k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
  (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
  ym(104290205, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, ecommerce:"dataLayer" });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/104290205" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

</body>
</html>